<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>C&#43;&#43;项目 on Ar-Gas&#39;blog</title>
    <link>http://localhost:1313/categories/c&#43;&#43;%E9%A1%B9%E7%9B%AE/</link>
    <description>Recent content in C&#43;&#43;项目 on Ar-Gas&#39;blog</description>
    <generator>Hugo</generator>
    <language>zh</language>
    <lastBuildDate>Tue, 19 Dec 2023 20:29:00 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/categories/c++%E9%A1%B9%E7%9B%AE/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>echo服务实现 - muduo入门项目</title>
      <link>http://localhost:1313/past_posts/muduo-echo/</link>
      <pubDate>Tue, 19 Dec 2023 20:29:00 +0000</pubDate>
      <guid>http://localhost:1313/past_posts/muduo-echo/</guid>
      <description>&lt;h3 id=&#34;1-muduo安装&#34;&gt;1. muduo安装&lt;/h3&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://blog.csdn.net/PinkFriday/article/details/78523260&#34; target=&#34;_blank&#34;&gt;参考链接&lt;/a&gt;&#xD;&#xA;&lt;/p&gt;&#xA;&lt;h3 id=&#34;2-编译&#34;&gt;2. 编译&lt;/h3&gt;&#xA;&lt;p&gt;参考同上&lt;/p&gt;&#xA;&lt;h3 id=&#34;3-编写echo服务代码&#34;&gt;3. 编写echo服务代码&lt;/h3&gt;&#xA;&lt;p&gt;muduo作者写的三个半：&lt;/p&gt;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;  &lt;blockquote&gt;&#xD;&#xA;    &lt;p&gt;&lt;a href=&#34;https://blog.csdn.net/Solstice/article/details/6171831&#34; target=&#34;_blank&#34;&gt;https://blog.csdn.net/Solstice/article/details/6171831&lt;/a&gt;&#xD;&#xA;&lt;/p&gt;&#xA;&lt;p&gt;我认为，TCP 网络编程最本质的是处理三个半事件：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;连接的建立，包括服务端接受 (accept) 新连接和客户端成功发起 (connect) 连接；&lt;/li&gt;&#xA;&lt;li&gt;连接的断开，包括主动断开 (close 或 shutdown) 和被动断开 (read 返回 0)；&lt;/li&gt;&#xA;&lt;li&gt;消息到达，文件描述符可读。这是最为重要的一个事件，对它的处理方式决定了网络编程的风格（阻塞还是非阻塞，如何处理分包，应用层的缓冲如何设计等等）；&lt;/li&gt;&#xA;&lt;li&gt;消息发送完毕，这算半个。对于低流量的服务，可以不必关心这个事件；另外，这里“发送完毕”是指将数据写入操作系统的缓冲区，将由 TCP 协议栈负责数据的发送与重传，不代表对方已经收到数据。&lt;/li&gt;&#xA;&lt;/ol&gt;&#xD;&#xA;  &lt;/blockquote&gt;&#xD;&#xA;&#xD;&#xA;&lt;p&gt;*注：本代码引用库函数为系统库引用方式（详见参考链接），路径方式需修改&lt;/p&gt;&#xA;&lt;p&gt;muduo采用的是2023/12/15日在github上的版本（两年前更新？）&lt;/p&gt;&#xA;&lt;p&gt;三个文件：&lt;/p&gt;&#xA;&lt;p&gt;echo.h:：定义 EchoServer class；&lt;/p&gt;&#xA;&lt;p&gt;echo.cc：在构造函数里注册回调函数，实现 EchoServer::onConnection() 和 EchoServer::onMessage()；&lt;/p&gt;&#xA;&lt;p&gt;main.cc：用 EventLoop 让整个程序跑起来。&lt;/p&gt;&#xA;&lt;h4 id=&#34;echoh&#34;&gt;echo.h&lt;/h4&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#ifndef MUDUO_EXAMPLES_SIMPLE_ECHO_ECHO_H&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#define MUDUO_EXAMPLES_SIMPLE_ECHO_ECHO_H&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&amp;lt;muduo/net/TcpServer.h&amp;gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//RFC 862&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;EchoServer&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    EchoServer(muduo&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;net&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;EventLoop&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; loop,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;               &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; muduo&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;net&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;InetAddress&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt; listenAddr);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;start&lt;/span&gt;(); &lt;span style=&#34;color:#75715e&#34;&gt;// calls server_.start();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; onConnection(&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; muduo&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;net&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;TcpConnectionPtr&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt; conn);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;onMessage&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; muduo&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;net&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;TcpConnectionPtr&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt; conn,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                   muduo&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;net&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;Buffer&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; buf,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                   muduo&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;Timestamp time);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    muduo&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;net&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;TcpServer server_;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;};&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#endif  &lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// MUDUO_EXAMPLES_SIMPLE_ECHO_ECHO_H&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;echocc&#34;&gt;echo.cc&lt;/h4&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&amp;#34;echo.h&amp;#34;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&amp;lt;muduo/base/Logging.h&amp;gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;using&lt;/span&gt; std&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;placeholders&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;_1;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;using&lt;/span&gt; std&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;placeholders&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;_2;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;using&lt;/span&gt; std&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;placeholders&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;_3;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;EchoServer&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;EchoServer(muduo&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;net&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;EventLoop&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; loop,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;               &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; muduo&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;net&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;InetAddress&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt; listenAddr)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; server_(loop, listenAddr, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;EchoServer&amp;#34;&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    server_.setConnectionCallback(&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        std&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;bind(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;EchoServer&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;onConnection, &lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;, _1));&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    server_.setMessageCallback(&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;         std&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;bind(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;EchoServer&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;onMessage, &lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;, _1, _2, _3));&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; EchoServer&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;start()&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    server_.start();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; EchoServer&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;onConnection(&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; muduo&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;net&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;TcpConnectionPtr&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt; conn)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    LOG_INFO &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;EchoServer - &amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; conn&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;peerAddress().toIpPort() &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;-&amp;gt;&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;             &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; conn&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;localAddress().toIpPort() &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34; is &amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;             &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; (conn&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;connected() &lt;span style=&#34;color:#f92672&#34;&gt;?&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;UP&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DOWN&amp;#34;&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; EchoServer&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;onMessage(&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; muduo&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;net&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;TcpConnectionPtr&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt; conn,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                           muduo&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;net&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;Buffer&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; buf,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                           muduo&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;Timestamp time)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    muduo&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;string msg(buf&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;retrieveAllAsString());&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    LOG_INFO &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; conn&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;name() &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34; echo &amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; msg.size() &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34; bytes, &amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;             &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;data received at &amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; time.toString();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    conn&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;send(msg); &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;maincc&#34;&gt;main.cc&lt;/h4&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&amp;#34;echo.h&amp;#34;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&amp;lt;muduo/base/Logging.h&amp;gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&amp;lt;muduo/net/EventLoop.h&amp;gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;unistd.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;()&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    LOG_INFO &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;pid = &amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; getpid();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    muduo&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;net&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;EventLoop loop;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    muduo&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;net&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;InetAddress listenAddr(&lt;span style=&#34;color:#ae81ff&#34;&gt;2007&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    EchoServer server(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;loop, listenAddr);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    server.start();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    loop.loop();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;编译运行&#34;&gt;编译运行&lt;/h4&gt;&#xA;&lt;p&gt;在echo文件路径下编译：&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
